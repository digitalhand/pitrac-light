@startuml
title PiTrac Hardware Topology (Single-Pi Primary)

skinparam shadowing false
skinparam backgroundColor white
skinparam componentStyle rectangle
skinparam packageStyle rectangle

node "PiTrac Enclosure" as enclosure {
  package "Power Path" {
    [AC Inlet\n(C14 + Fuse)] as ac_in
    [5V PSU\n(Meanwell LRS-75-5)] as psu5v
    [Connector Board V2\n(power + trigger distribution)] as cb
  }

  package "Compute + Vision" {
    [Raspberry Pi 5\n(primary runtime)] as pi5
    [Camera 1\n(IMX296 global shutter)\nTeed-ball camera] as cam1
    [Camera 2\n(IMX296 global shutter)\nFlight camera] as cam2
  }

  package "Lighting" {
    [IR Strobe Module\n(100W 730nm COB + Lens)] as ir_strobe
    [Visible LED Strip\n(tee-area lighting)] as led_strip
  }

  package "Optional Legacy" {
    [Second Raspberry Pi 5\n(dual-Pi deployments)] as pi5b
  }
}

cloud "Network / Simulator Side" as net {
  [Router / LAN] as lan
  [Simulator PC\n(GSPro)] as simpc
}

ac_in --> psu5v : AC mains
psu5v --> cb : +5V input
cb --> pi5 : +5V power

pi5 --> cam1 : CSI ribbon cable
pi5 --> cam2 : CSI ribbon cable
pi5 --> cam2 : trigger/control pair

pi5 --> cb : GPIO control harness\n(strobe/control signaling)
cb --> ir_strobe : regulated strobe output
psu5v --> led_strip : 5V lighting power

pi5 --> lan : Ethernet/Wi-Fi
lan --> simpc : GSPro data path

cb ..> pi5b : optional second Pi power/control

note bottom of cb
Connector Board V2 functions:
- Shared 5V distribution
- Boost conversion for strobe path
- Current limiting
- Duty-cycle protection
end note

note bottom of ir_strobe
Drive strobe through connector-board output stage,
not directly from raw PSU lines.
end note

@enduml
